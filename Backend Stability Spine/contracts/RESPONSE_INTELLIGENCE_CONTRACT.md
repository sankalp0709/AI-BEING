# Response Intelligence Contract (v1.0.0)

## Overview
This contract defines the strict output structure for the Sankalp Response Engine. It ensures that every response generated by the AI Assistant is intentional, safe, and context-aware. This contract serves as the interface between the Response Engine and the UX Layer.

## Core Response Block
Every response from the assistant MUST adhere to the following schema:

```json
{
  "trace_id": "string (sha256 hash of input + version)",
  "content": "string (the actual text spoken/displayed)",
  "meta": {
    "response_type": "enum(INFORM, ASK, SUGGEST, WAIT, SILENT)",
    "urgency_level": "enum(LOW, MEDIUM, HIGH, CRITICAL)",
    "emotional_tone": "string (mapped from Emotion Engine)",
    "user_choice_required": "boolean",
    "pacing_hint": "string (optional, e.g., 'pause_before', 'fast')"
  },
  "context_update": {
    "deferred_intent": "string (optional)",
    "topic_state": "string (optional)"
  }
}
```

## Field Definitions

### 1. Response Type (`response_type`)
Determines the functional intent of the response.
- **INFORM**: Provide information or answer a query directly. (e.g., "The weather is 25Â°C.")
- **ASK**: Request clarification or input from the user. (e.g., "Do you want me to set a reminder?")
- **SUGGEST**: Propose an action without demanding immediate input. (e.g., "You might want to review your schedule.")
- **WAIT**: Acknowledge receipt but delay full processing (for long tasks). (e.g., "Checking that for you...")
- **SILENT**: No response (used for passive monitoring or ignored inputs).

### 2. Urgency Level (`urgency_level`)
Dictates how the UX should render the response (color, vibration, interrupt).
- **LOW**: Ambient info, no notification. (e.g., "Battery is at 80%.")
- **MEDIUM**: Standard conversation. (e.g., "Here is the recipe you asked for.")
- **HIGH**: Action required or important alert. (e.g., "Your meeting starts in 5 minutes.")
- **CRITICAL**: Safety or system critical. (e.g., "Emergency alert received.")

### 3. Emotional Tone (`emotional_tone`)
Derived from the Emotion Engine (Warm, Dignified, Steady, etc.).
- **Warm/Calm**: Supportive, gentle.
- **Dignified/Steady**: Professional, objective.
- **Neutral**: Purely informational.

### 4. User Choice Required (`user_choice_required`)
- **True**: The system pauses and waits for user selection/confirmation.
- **False**: The system continues or ends the turn.

## Defaults and Fallbacks
- **Default Response Type**: INFORM
- **Default Urgency**: LOW
- **Default Tone**: NEUTRAL
- **Default Choice**: False

## Error Handling
In case of internal failure, the system falls back to a **Safe Failure Mode**:
- `response_type`: INFORM
- `content`: "I'm having trouble processing that right now. Please try again."
- `urgency_level`: LOW

## Versioning
This contract is **LOCKED** at version 1.0.0 for the Integration Phase C Demo. Any changes require a version bump and re-verification.
